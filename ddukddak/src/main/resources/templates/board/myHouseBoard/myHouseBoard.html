<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>뚝딱뚝딱 : 커뮤니티</title>

      <link rel="stylesheet" href="/css/board/myHouseBoard/myHouseBoard.css">
      <link rel="stylesheet" href="/css/common/main.css"> 
      <link rel="stylesheet" href="/css/common/fragments/header.css">  
      <link rel="stylesheet" href="/css/common/fragments/footer.css"> 
      <link rel="stylesheet" href="/css/common/fragments/board/side-category.css"> 
      <link rel="stylesheet" href="/css/common/button.css"> 
      <link rel="icon" type="image/x-icon" href="/images/main/favicon.ico">

      <script src="https://kit.fontawesome.com/fa0ef5fd68.js" crossorigin="anonymous"></script>
  </head>
  <body>

    <th:block th:replace="~{common/fragments/header}"></th:block>
    
    
    
    <div class="topContainer">
      
      
      <div class="mainContainer">
        
        <th:block th:replace="~{common/fragments/board/side-category}"></th:block>
        <!-- <section class="categoryNav">
    
          <div class="boardMainBtn" id="toMyHouseBoard">집들이</div>
          <div class="boardMainBtn" id="toTipBoard">노하우</div>
    
        </section> -->


        <section class="mainArea">

          <section class="searchArea">

              <span class="title">집들이</span>
              <span>
                <form th:action="@{/myHouse/main}" class="searchForm">
                  <input type="text" placeholder="집들이(제목, 작성자) 검색" name="query" class="searchBox" id="query">
                  <input type="hidden" th:value="${boardCode}" name="boardCode">
                  <button  id="searchBtn">
                    <input type="hidden" name="boardCode" th:value="${boardCode}">
                    <i class="fa-solid fa-magnifying-glass"></i>
                  </button>
                </form>
              </span>

          </section>
          
          <section class="sortingArea">
            <select id="sortingSelect">
              <option value="latest" th:selected="${sort == 'latest'}">최신순</option>
              <option value="views" th:selected="${sort == 'views'}">조회순</option>
              <option value="likeCount" th:selected="${sort == 'likeCount'}">좋아요순</option>
            </select>
          </section>
          
          <section class="listArea">

            <th:block th:if="${#lists.isEmpty(myHouseList)}">
              <h3 class="emptyList">등록된 집들이 게시물이 없습니다.</h3>
            </th:block>

            <th:block th:each="myHouse : ${myHouseList}" th:unless="${#lists.isEmpty(myHouseList)}">

              <a th:unless="${param.query}"
                 class="myHouseList" 
                 id="myHouseDetail"
                 th:href="@{/myHouse/detail/{boardNo} (boardNo=${myHouse.boardNo}, cp=${pagination.currentPage})}">
                
                <span class="myHouseThumbnail">
                  <img th:src="${myHouse.thumbnail}">
                </span>
                <span class="myHouseInfo">
                  <div>
                    <h2 th:text="${myHouse.boardTitle}">셀프인테리어 후기</h2>
                  </div>
                  <div class="myHouseRightSide">
                    <h3 th:text="${myHouse.memberNickname}">유저일</h3>
                    <span>|</span>
                    <h3 th:text="|조회수 : ${myHouse.readCount}|">조회수</h3>
                    <span>|</span>
                    <h3 th:text="${myHouse.boardWriteDate}">날짜</h3>
                    <span>|</span>
                      <div class="likeArea">
                        <i class="fa-solid fa-heart" style="color: red;"></i>
                        <!-- 빈하트 : fa-regular -->
                        <h3 th:text="${myHouse.likeCount}">10</h3>
                      </div>
                  </div>
                </span>

              </a>

              <a th:if="${param.query}"
                 class="myHouseList" 
                 id="myHouseDetail"
                 th:href="@{/myHouse/detail/{boardNo} (boardNo=${myHouse.boardNo}, cp=${pagination.currentPage}, query=${param.query})}">
                
                <span class="myHouseThumbnail">
                  <img th:src="${myHouse.thumbnail}">
                </span>
                <span class="myHouseInfo">
                  <div>
                    <h2 th:text="${myHouse.boardTitle}">셀프인테리어 후기</h2>
                  </div>
                  <div class="myHouseRightSide">
                    <h3 th:text="${myHouse.memberNickname}">유저일</h3>
                    <span>|</span>
                    <h3 th:text="|조회수 : ${myHouse.readCount}|">조회수</h3>
                    <span>|</span>
                    <h3 th:text="${myHouse.boardWriteDate}">날짜</h3>
                    <span>|</span>
                      <div class="likeArea">
                        <i class="fa-solid fa-heart" style="color: red;"></i>
                        <!-- 빈하트 : fa-regular -->
                        <h3 th:text="${myHouse.likeCount}">10</h3>
                      </div>
                  </div>
                </span>

              </a>

            </th:block>

          </section>
          
          <section class="btnArea">
            <button type="button" class="boardCreateBtn" id="boardCreateBtn" th:if="${session.loginMember}">작성하기</button>
          </section>
          
          <section class="paginationArea">

            <div class="pagination-area">
          
              <!-- 일반 목록 조회 (검색 X) -->
              <ul class="pagination" th:unless="${param.query}" th:object="${pagination}">
                  <!-- 첫 페이지로 이동 -->
                  <li><a th:href="@{/myHouse/main(boardCode=${boardCode}, cp=1)}">&lt;&lt;</a></li>

                  <!-- 이전 목록 마지막 번호로 이동 -->
                  <li><a th:href="@{/myHouse/main(boardCode=${boardCode}, cp=*{prevPage})}">&lt;</a></li>

                  <!-- 특정 페이지로 이동 -->
                  <th:block th:each="i : *{#numbers.sequence(startPage, endPage)}">

                      <!-- 현재 보고있는 페이지 -->
                      <li th:if="${i} == *{currentPage}">
                          <a class="current" th:text="${i}">1</a>
                      </li>

                      <!-- 보고있지 않은 페이지 -->
                      <li th:unless="${i} == *{currentPage}">
                          <a th:href="@{/myHouse/main(boardCode=${boardCode}, cp=${i})}"
                             th:text="${i}">2</a>
                      </li>
                  </th:block>

                  <!-- 다음 목록 시작 번호로 이동 -->
                  <li><a th:href="@{/myHouse/main(boardCode=${boardCode}, cp=*{nextPage})}">&gt;</a></li>

                  <!-- 끝 페이지로 이동 -->
                  <li><a th:href="@{/myHouse/main(boardCode=${boardCode}, cp=*{maxPage})}">&gt;&gt;</a></li>
              </ul>

              <!-- ------------------------------------------------------------------------------- -->

              <!-- 검색 결과 조회 -->
              <ul class="pagination" th:if="${param.query}" th:object="${pagination}">
                <!-- 첫 페이지로 이동 -->
                <li><a th:href="@{/myHouse/main(boardCode=${boardCode}, cp=1, query=${param.query})}">&lt;&lt;</a></li>

                <!-- 이전 목록 마지막 번호로 이동 -->
                <li><a th:href="@{/myHouse/main(boardCode=${boardCode}, cp=*{prevPage}), query=${param.query}}">&lt;</a></li>

                <!-- 특정 페이지로 이동 -->
                <th:block th:if="*{startPage lt endPage}" th:each="i : *{#numbers.sequence(startPage, endPage)}">

                    <!-- 현재 보고있는 페이지 -->
                    <li th:if="${i} == *{currentPage}">
                        <a class="current" th:text="${i}">1</a>
                    </li>

                    <!-- 보고있지 않은 페이지 -->
                    <li th:unless="${i} == *{currentPage}">
                        <a th:href="@{/myHouse/main(boardCode=${boardCode}, cp=${i}), query=${param.query}}"
                           th:text="${i}">2</a>
                    </li>
                </th:block>

                <!-- 일치하는 게시글이 없을 겨우 -->
                <th:block th:unless="*{startPage lt endPage}">

                  <li>
                    <a class="current">1</a>
                  </li>

                </th:block>

                <!-- 다음 목록 시작 번호로 이동 -->
                <li><a th:href="@{/myHouse/main(boardCode=${boardCode}, cp=*{nextPage}), query=${param.query}}">&gt;</a></li>

                <!-- 끝 페이지로 이동 -->
                <li><a th:href="@{/myHouse/main(boardCode=${boardCode}, cp=*{maxPage}), query=${param.query}}">&gt;&gt;</a></li>
            </ul>

          </div>

          </section>

        </section>

      </div>
      
    </div>

    <div id="top">↑</div>
          
    <th:block th:replace="~{common/fragments/footer}"></th:block>

    <script>
      const boardCode = /*[[${boardCode}]]*/ "게시판 코드 번호";
    </script>

    <script src="/js/common/fragments/board/side-category.js"></script>
    <script src="/js/board/myHouseboard/myHouseBoard.js"></script>
    <script src="/js/common/main.js"></script>
      
  </body>
</html>