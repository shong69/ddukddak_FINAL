<style>
    #searchCategory {
    display: flex;
    margin: 5px 0;
    }

    #searchCategory > * {
        margin-right: 30px;
    }

    #searchCategory select {
        width: 200px;
        height: 30px;
        padding: 0 10px;
        border-radius: 5px;
    }

    #searchCategory input {
        width: 200px;
        height: 30px;
    }
</style>

<div id="searchCategory">
    <h3>검색 분류</h3>
    
    <select>
        <option>상품명</option>
        <option>상품번호</option>
        <option>주문번호</option>
    </select>

    <form action="" method="get" id="boardSearch">
        <input type="text" name="query" id="searchQuery">
        <button style="background: none; border: none;">
        </button>
        
    </form>
</div>


<script>
    // 폼 요소를 가져옵니다
    var form = document.getElementById("boardSearch");

    // 폼 요소를 가져옵니다
    var form = document.getElementById("boardSearch");

    // 폼이 제출되었을 때 실행되는 함수를 추가합니다
    form.addEventListener("submit", function(event) {
        // 현재 URL을 가져옵니다
        var currentUrl = window.location.href;

        // 이벤트 기본 동작을 중지합니다
        event.preventDefault();

        // 검색어를 가져옵니다
        var query = document.getElementById("searchQuery").value;

        // newPath 변수를 설정합니다
        var newPath = currentUrl.split('?')[0];

        // 정규식을 사용하여 현재 URL이 ?sort='숫자'로 끝나는지 확인합니다
        var sortRegex = /\?sort=\d+$/;

        // 검색어를 URL에 추가합니다
        var newUrl;
        if (sortRegex.test(currentUrl)) {
            newUrl = newPath + "?sort=" + currentUrl.split('?')[1].split('=')[1] + "&query=" + encodeURIComponent(query);
        } else {
            newUrl = newPath + "?query=" + encodeURIComponent(query);
        }

        // 새 URL로 이동합니다
        window.location.href = newUrl;
    });
</script>