<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>뚝딱뚝딱 : 쇼핑</title>

    <link rel="stylesheet" href="/css/common/fragments/header.css">
    <link rel="stylesheet" href="/css/common/fragments/footer.css">
    <link rel="stylesheet" href="/css/common/main.css">
    <link rel="stylesheet" href="/css/eCommerce/eCommerceComplete.css">
    <link rel="icon" type="image/x-icon" href="/images/main/favicon.ico">
</head>
<body>
    <th:block th:replace="~{common/fragments/header}"></th:block>
    
    <!-- 
    model.addAttribute("merchantUid", merchantUid);
    model.addAttribute("deliveryMemo", deliveryMemo);
    model.addAttribute("paymentInfo", payment); 
    -->

    <h2 style="text-align: center; margin: 50px;">주문/결제</h2>
    
    <div id="completeBox">
        <div style="padding: 20px 0; border-bottom: 1px solid rgb(187, 187, 187); margin: 0 20px;">
            <h1 style="color: #3A732A;">주문이 정상적으로 완료되었습니다!</h1>
        </div>


        <div id="boxUnder">
            <div>
                <table>
                    <tr>
                        <td><h3>주문번호</h3></td>
                        <td><h3 style="font-weight: bold;" th:text="${merchantUid}">12345678</h3></td>
                    </tr>
                    <tr>
                        <td><h3>배송지 정보</h3></td>
                        <td>
                            <h3 style="color: rgb(165, 165, 165);" th:text="${paymentInfo.buyerPostcode}">우편번호</h3>
                            <h3 style="color: rgb(165, 165, 165);" th:text="${paymentInfo.buyerAddr}">주소</h3>
                            <h3 id="buyerTel" style="color: rgb(165, 165, 165);" th:text="${paymentInfo.buyerTel}">연락처</h3>
                            <h3 style="color: rgb(125, 123, 123); font-size: 14px;" th:text="|[배송요청사항 : ${deliveryMemo}]|"></h3>
                        </td>
                    </tr>
                    <tr>
                        <td><h3>주문금액</h3></td>
                        <td><h3 id="amount" style="font-weight: bold;" th:text="${paymentInfo.amount}">16,900원</h3></td>
                    </tr>
                    <tr>
                        <td><h3>결제상세</h3></td>
                        <td><h3 style="color: rgb(165, 165, 165);" th:text="${paymentInfo.pgProvider}">신용카드</h3>
                            <th:block th:if="${paymentInfo.payMethod == card}">
                                <h3 style="color: rgb(165, 165, 165);" th:text="${paymentInfo.cardName}">카드이름</h3>
                            </th:block>

                            <th:block th:unless="${paymentInfo.payMethod == card}">
                                <h3 style="color: rgb(165, 165, 165);">카카오포인트</h3>
                            </th:block>
                            
                            <h3 style="color: rgb(165, 165, 165);" th:text="|결제일시 : ${formattedPaidAt}|">결제일시 : 2024-05-23</h3></td>
                            
                    </tr>
                </table>
            </div>

            <img src="/images/main/main-logo.png" style="height: 300px; opacity: 10%;">
        </div>
    </div>


    <div style="border: 1px solid rgb(165, 165, 165); width: 100%; margin-top: 100px; margin-bottom: 50px;"></div>


    <!-- 관련상품 -->
    <div id="shoping-list">
        <div>
        <h3 style="font-weight: bold;">관련상품</h3>
        </div>

        <div style="margin-bottom: 10px;">
        <h4>+ 더보기</h4>
        </div>

        <!-- 쇼핑 아이템들 -->
        <div id="shopping-items">
        <div style="margin-right: 50px;">
            <div><img src="/images/main/shopping-1.jpg" style="height: 200px; width: 200px;"></div>
            <div>
            <h4>[최대10%쿠폰+사은품][맞춤]비침없는 도톰<br>
                레이스/쉬폰커튼(나비주름/핀형/봉집)</h4>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <h3 style="color: #3A732A; margin-right: 15px;">32%</h3>
            <h3 style="font-weight: 600;">32,700</h3>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <img src="/images/main/star.png" style="height: 10px;">
            <h5 style="margin-right: 5px;">4.1</h5>
            <h5 style="color: #9B9B9B;">리뷰 78개</h5>
            </div>
        </div>


        <div style="margin-right: 50px;">
            <div><img src="/images/main/shopping-2.jpg" style="height: 200px; width: 200px;"></div>
            <div>
            <h4>[최대10%쿠폰+사은품][맞춤]비침없는 도톰<br>
                레이스/쉬폰커튼(나비주름/핀형/봉집)</h4>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <h3 style="color: #3A732A; margin-right: 15px;">32%</h3>
            <h3 style="font-weight: 600;">32,700</h3>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <img src="/images/main/star.png" style="height: 10px;">
            <h5 style="margin-right: 5px;">4.1</h5>
            <h5 style="color: #9B9B9B;">리뷰 78개</h5>
            </div>
        </div>


        <div style="margin-right: 50px;">
            <div><img src="/images/main/shopping-3.jpg" style="height: 200px; width: 200px;"></div>
            <div>
            <h4>[최대10%쿠폰+사은품][맞춤]비침없는 도톰<br>
                레이스/쉬폰커튼(나비주름/핀형/봉집)</h4>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <h3 style="color: #3A732A; margin-right: 15px;">32%</h3>
            <h3 style="font-weight: 600;">32,700</h3>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <img src="/images/main/star.png" style="height: 10px;">
            <h5 style="margin-right: 5px;">4.1</h5>
            <h5 style="color: #9B9B9B;">리뷰 78개</h5>
            </div>
        </div>


        <div style="margin-right: 50px;">
            <div><img src="/images/main/shopping-4.jpg" style="height: 200px; width: 200px;"></div>
            <div>
            <h4>[최대10%쿠폰+사은품][맞춤]비침없는 도톰<br>
                레이스/쉬폰커튼(나비주름/핀형/봉집)</h4>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <h3 style="color: #3A732A; margin-right: 15px;">32%</h3>
            <h3 style="font-weight: 600;">32,700</h3>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <img src="/images/main/star.png" style="height: 10px;">
            <h5 style="margin-right: 5px;">4.1</h5>
            <h5 style="color: #9B9B9B;">리뷰 78개</h5>
            </div>
        </div>


        <div style="margin-right: 50px;">
            <div><img src="/images/eCommerce/shopping-1.jpg" style="height: 200px; width: 200px;"></div>
            <div>
            <h4>[최대10%쿠폰+사은품][맞춤]비침없는 도톰<br>
                레이스/쉬폰커튼(나비주름/핀형/봉집)</h4>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <h3 style="color: #3A732A; margin-right: 15px;">32%</h3>
            <h3 style="font-weight: 600;">32,700</h3>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <img src="/images/main/star.png" style="height: 10px;">
            <h5 style="margin-right: 5px;">4.1</h5>
            <h5 style="color: #9B9B9B;">리뷰 78개</h5>
            </div>
        </div>


        <div>
            <div><img src="/images/eCommerce/shopping-2.jpg" style="height: 200px; width: 200px;"></div>
            <div>
            <h4>[최대10%쿠폰+사은품][맞춤]비침없는 도톰<br>
                레이스/쉬폰커튼(나비주름/핀형/봉집)</h4>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <h3 style="color: #3A732A; margin-right: 15px;">32%</h3>
            <h3 style="font-weight: 600;">32,700</h3>
            </div>
            <div style="display: flex; margin-top: 8px;">
            <img src="/images/main/star.png" style="height: 10px;">
            <h5 style="margin-right: 5px;">4.1</h5>
            <h5 style="color: #9B9B9B;">리뷰 78개</h5>
            </div>
        </div>

    </div>
    
    <th:block th:replace="~{common/fragments/footer}"></th:block>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const amountElement = document.getElementById('amount');
            const amountText = amountElement.textContent;

            const formatAmount = (amount) => {
                return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            };

            const formattedAmount = formatAmount(amountText);
            amountElement.textContent = formattedAmount + '원';

            const telElement = document.getElementById('buyerTel');
            const telText = telElement.textContent;

            const formatTel = (tel) => {
                return tel.replace(/(\d{3})(\d{4})(\d{4})/, '$1-$2-$3');
            };

            const formattedTel = formatTel(telText);
            telElement.textContent = formattedTel;
        });
    </script>
</body>
</html>