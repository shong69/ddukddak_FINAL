<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ddukddak.board.model.mapper.MyHouseBoardMapper">
	
	<!-- 집들이 게시글 작성 -->
	<insert id="boardInsert" useGeneratedKeys="true" parameterType="Board">
		
		<selectKey order="BEFORE" resultType="_int" keyProperty="boardNo">
			SELECT SEQ_BOARD_NO.NEXTVAL FROM DUAL
		</selectKey>
		
		INSERT INTO "COMMUNITY"
		VALUES ( #{boardNo},
				 #{boardTitle},
				 #{boardContent},
				 DEFAULT,
				 NULL,
				 DEFAULT,
				 DEFAULT,
				 1,
				 1)
		
	</insert>
	
	<!-- 게시글 이미지 삽입 -->
	<insert id="insertUploadList" parameterType="list">
		
		INSERT ALL
		
		<foreach collection="list" item="img"
				separator="">
		
		INTO "UPLOAD_FILE" VALUES(
				SEQ_UPLOAD_IMG_NO.NEXTVAL,
					   #{img.uploadImgPath},
					   #{img.uploadImgOgName},
					   #{img.uploadImgRename},
					   #{img.uploadImgOrder},
					   3,
					   NULL,
					   #{img.boardNo},
					   NULL,
					   NULL
			  )
				   
		</foreach>
		SELECT 1 FROM DUAL
	</insert>
	
	
</mapper>
